package t9.mobile.weather;

import java.sql.Connection;
import java.util.HashMap;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.httpclient.DefaultHttpMethodRetryHandler;
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpStatus;
import org.apache.commons.httpclient.methods.GetMethod;
import org.apache.commons.httpclient.params.HttpMethodParams;

import t9.core.data.T9RequestDbConn;
import t9.core.funcs.person.data.T9Person;
import t9.core.global.T9ActionKeys;
import t9.core.global.T9BeanKeys;
import t9.core.global.T9Const;
import t9.core.util.T9Utility;
import t9.core.util.db.T9DBUtility;
import t9.mobile.address.logic.T9PdaAddressLogic;
import t9.mobile.util.T9MobileConfig;
import t9.mobile.util.T9MobileUtility;

public class T9PdaWeatherAct {
  public static Map<String, String> m = new HashMap();
  static {
    m.put("北京","101010100");
    m.put("重庆","101040100");
    m.put("上海","101020100");
    m.put("天津","101030100");
    m.put("澳门","101330101");
    m.put("香港","101320101");
    m.put("合肥","101220101");
    m.put("蚌埠","101220201");
    m.put("芜湖","101220301");
    m.put("淮南","101220401");
    m.put("马鞍山","101220501");
    m.put("安庆","101220601");
    m.put("宿州","101220701");
    m.put("阜阳","101220801");
    m.put("亳州","101220901");
    m.put("黄山","101221001");
    m.put("滁州","101221101");
    m.put("淮北","101221201");
    m.put("铜陵","101221301");
    m.put("宣城","101221401");
    m.put("六安","101221501");
    m.put("巢湖","101221601");
    m.put("池州","101221701");
    m.put("福州","101230101");
    m.put("厦门","101230201");
    m.put("宁德","101230301");
    m.put("莆田","101230401");
    m.put("泉州","101230501");
    m.put("漳州","101230601");
    m.put("龙岩","101230701");
    m.put("三明","101230801");
    m.put("南平","101230901");
    m.put("兰州","101160101");
    m.put("定西","101160201");
    m.put("平凉","101160301");
    m.put("庆阳","101160401");
    m.put("武威","101160501");
    m.put("金昌","101160601");
    m.put("张掖","101160701");
    m.put("酒泉","101160801");
    m.put("天水","101160901");
    m.put("武都","101161001");
    m.put("临夏","101161101");
    m.put("合作","101161201");
    m.put("白银","101161301");
    m.put("广州","101280101");
    m.put("韶关","101280201");
    m.put("惠州","101280301");
    m.put("梅州","101280401");
    m.put("汕头","101280501");
    m.put("深圳","101280601");
    m.put("珠海","101280701");
    m.put("佛山","101280800");
    m.put("肇庆","101280901");
    m.put("湛江","101281001");
    m.put("江门","101281101");
    m.put("河源","101281201");
    m.put("清远","101281301");
    m.put("云浮","101281401");
    m.put("潮州","101281501");
    m.put("东莞","101281601");
    m.put("中山","101281701");
    m.put("阳江","101281801");
    m.put("揭阳","101281901");
    m.put("茂名","101282001");
    m.put("汕尾","101282101");
    m.put("东沙岛","101282105");
    m.put("德庆","101280905");
    m.put("南宁","101300101");
    m.put("崇左","101300201");
    m.put("柳州","101300301");
    m.put("来宾","101300401");
    m.put("桂林","101300501");
    m.put("梧州","101300601");
    m.put("贺州","101300701");
    m.put("贵港","101300801");
    m.put("玉林","101300901");
    m.put("百色","101301001");
    m.put("钦州","101301101");
    m.put("河池","101301201");
    m.put("北海","101301301");
    m.put("防城港","101301401");
    m.put("贵阳","101260101");
    m.put("遵义","101260201");
    m.put("安顺","101260301");
    m.put("都匀","101260401");
    m.put("凯里","101260501");
    m.put("铜仁","101260601");
    m.put("毕节","101260701");
    m.put("六盘水","101260801");
    m.put("黔西","101260901");
    m.put("海口","101310101");
    m.put("琼山","101310102");
    m.put("三亚","101310201");
    m.put("东方","101310202");
    m.put("临高","101310203");
    m.put("澄迈","101310204");
    m.put("儋州","101310205");
    m.put("昌江","101310206");
    m.put("白沙","101310207");
    m.put("琼中","101310208");
    m.put("定安","101310209");
    m.put("屯昌","101310210");
    m.put("琼海","101310211");
    m.put("文昌","101310212");
    m.put("清兰","101310213");
    m.put("保亭","101310214");
    m.put("万宁","101310215");
    m.put("陵水","101310216");
    m.put("西沙","101310217");
    m.put("珊瑚岛","101310218");
    m.put("永署礁","101310219");
    m.put("南沙岛","101310220");
    m.put("乐东","101310221");
    m.put("通什","101310222");
    m.put("石家庄","101090101");
    m.put("保定","101090201");
    m.put("张家口","101090301");
    m.put("承德","101090402");
    m.put("唐山","101090501");
    m.put("廊坊","101090601");
    m.put("沧州","101090701");
    m.put("衡水","101090801");
    m.put("邢台","101090901");
    m.put("邯郸","101091001");
    m.put("秦皇岛","101091101");
    m.put("郑州","101180101");
    m.put("安阳","101180201");
    m.put("新乡","101180301");
    m.put("许昌","101180401");
    m.put("平顶山","101180501");
    m.put("信阳","101180601");
    m.put("南阳","101180701");
    m.put("开封","101180801");
    m.put("洛阳","101180901");
    m.put("商丘","101181001");
    m.put("焦作","101181101");
    m.put("鹤壁","101181201");
    m.put("濮阳","101181301");
    m.put("周口","101181401");
    m.put("漯河","101181501");
    m.put("驻马店","101181601");
    m.put("三门峡","101181701");
    m.put("济源","101181801");
    m.put("哈尔滨","101050101");
    m.put("齐齐哈尔","101050201");
    m.put("牡丹江","101050301");
    m.put("佳木斯","101050401");
    m.put("绥化","101050501");
    m.put("黑河","101050601");
    m.put("大兴安岭","101050701");
    m.put("伊春","101050801");
    m.put("大庆","101050901");
    m.put("七台河","101051002");
    m.put("鸡西","101051101");
    m.put("鹤岗","101051201");
    m.put("双鸭山","101051301");
    m.put("武汉","101200101");
    m.put("襄樊","101200201");
    m.put("鄂州","101200301");
    m.put("孝感","101200401");
    m.put("黄冈","101200501");
    m.put("黄石","101200601");
    m.put("咸宁","101200701");
    m.put("荆州","101200801");
    m.put("宜昌","101200901");
    m.put("恩施","101201001");
    m.put("十堰","101201101");
    m.put("神农架","101201201");
    m.put("随州","101201301");
    m.put("荆门","101201401");
    m.put("天门","101201501");
    m.put("仙桃","101201601");
    m.put("潜江","101201701");
    m.put("长沙","101250101");
    m.put("湘潭","101250201");
    m.put("株洲","101250301");
    m.put("衡阳","101250401");
    m.put("郴州","101250501");
    m.put("常德","101250601");
    m.put("益阳","101250701");
    m.put("娄底","101250801");
    m.put("邵阳","101250901");
    m.put("岳阳","101251001");
    m.put("张家界","101251101");
    m.put("怀化","101251201");
    m.put("黔阳","101251301");
    m.put("永州","101251401");
    m.put("吉首","101251501");
    m.put("长春","101060101");
    m.put("吉林","101060201");
    m.put("延吉","101060301");
    m.put("四平","101060401");
    m.put("通化","101060501");
    m.put("白城","101060601");
    m.put("辽源","101060701");
    m.put("松原","101060801");
    m.put("白山","101060901");
    m.put("南京","101190101");
    m.put("无锡","101190201");
    m.put("镇江","101190301");
    m.put("苏州","101190401");
    m.put("南通","101190501");
    m.put("扬州","101190601");
    m.put("盐城","101190701");
    m.put("徐州","101190801");
    m.put("淮安","101190901");
    m.put("连云港","101191001");
    m.put("常州","101191101");
    m.put("泰州","101191201");
    m.put("宿迁","101191301");
    m.put("南昌","101240101");
    m.put("九江","101240201");
    m.put("上饶","101240301");
    m.put("抚州","101240401");
    m.put("宜春","101240501");
    m.put("吉安","101240601");
    m.put("赣州","101240701");
    m.put("景德镇","101240801");
    m.put("萍乡","101240901");
    m.put("新余","101241001");
    m.put("鹰潭","101241101");
    m.put("沈阳","101070101");
    m.put("大连","101070201");
    m.put("鞍山","101070301");
    m.put("抚顺","101070401");
    m.put("本溪","101070501");
    m.put("丹东","101070601");
    m.put("锦州","101070701");
    m.put("营口","101070801");
    m.put("阜新","101070901");
    m.put("辽阳","101071001");
    m.put("铁岭","101071101");
    m.put("朝阳","101071201");
    m.put("盘锦","101071301");
    m.put("葫芦岛","101071401");
    m.put("旅顺","101070205");
    m.put("呼和浩特","101080101");
    m.put("包头","101080201");
    m.put("乌海","101080301");
    m.put("集宁","101080401");
    m.put("通辽","101080501");
    m.put("赤峰","101080601");
    m.put("鄂尔多斯","101080701");
    m.put("临河","101080801");
    m.put("锡林浩特","101080901");
    m.put("呼伦贝尔","101081000");
    m.put("乌兰浩特","101081101");
    m.put("阿拉善左旗","101081201");
    m.put("银川","101170101");
    m.put("石嘴山","101170201");
    m.put("吴忠","101170301");
    m.put("固原","101170401");
    m.put("中卫","101170501");
    m.put("西宁","101150101");
    m.put("海东","101150201");
    m.put("黄南","101150301");
    m.put("海南","101150401");
    m.put("果洛","101150501");
    m.put("玉树","101150601");
    m.put("海西","101150701");
    m.put("海北","101150801");
    m.put("济南","101120101");
    m.put("青岛","101120201");
    m.put("淄博","101120301");
    m.put("德州","101120401");
    m.put("烟台","101120501");
    m.put("潍坊","101120601");
    m.put("济宁","101120701");
    m.put("泰安","101120801");
    m.put("临沂","101120901");
    m.put("菏泽","101121001");
    m.put("滨州","101121101");
    m.put("东营","101121201");
    m.put("威海","101121301");
    m.put("枣庄","101121401");
    m.put("日照","101121501");
    m.put("莱芜","101121601");
    m.put("聊城","101121701");
    m.put("太原","101100101");
    m.put("大同","101100201");
    m.put("阳泉","101100301");
    m.put("晋中","101100401");
    m.put("长治","101100501");
    m.put("晋城","101100601");
    m.put("临汾","101100701");
    m.put("运城","101100801");
    m.put("朔州","101100901");
    m.put("忻州","101101001");
    m.put("吕梁","101101100");
    m.put("西安","101110101");
    m.put("咸阳","101110200");
    m.put("延安","101110300");
    m.put("榆林","101110401");
    m.put("渭南","101110501");
    m.put("商洛","101110601");
    m.put("安康","101110701");
    m.put("汉中","101110801");
    m.put("宝鸡","101110901");
    m.put("铜川","101111001");
    m.put("韩城","101110510");
    m.put("成都","101270101");
    m.put("攀枝花","101270201");
    m.put("自贡","101270301");
    m.put("绵阳","101270401");
    m.put("南充","101270501");
    m.put("达州","101270601");
    m.put("遂宁","101270701");
    m.put("广安","101270801");
    m.put("巴中","101270901");
    m.put("泸州","101271001");
    m.put("宜宾","101271101");
    m.put("内江","101271201");
    m.put("资阳","101271301");
    m.put("乐山","101271401");
    m.put("眉山","101271501");
    m.put("凉山","101271601");
    m.put("雅安","101271701");
    m.put("甘孜","101271801");
    m.put("阿坝","101271901");
    m.put("德阳","101272001");
    m.put("广元","101272101");
    m.put("台北县","101340101");
    m.put("高雄","101340201");
    m.put("台南","101340301");
    m.put("台中","101340401");
    m.put("桃园","101340501");
    m.put("新竹县","101340601");
    m.put("宜兰","101340701");
    m.put("马公","101340801");
    m.put("嘉义","101340901");
    m.put("花莲","101341001");
    m.put("台东","101341101");
    m.put("彭佳屿","101341201");
    m.put("拉萨","101140101");
    m.put("日喀则","101140201");
    m.put("山南","101140301");
    m.put("林芝","101140401");
    m.put("昌都","101140501");
    m.put("那曲","101140601");
    m.put("阿里","101140701");
    m.put("乌鲁木齐","101130101");
    m.put("克拉玛依","101130201");
    m.put("石河子","101130301");
    m.put("昌吉","101130401");
    m.put("吐鲁番","101130501");
    m.put("库尔勒","101130601");
    m.put("阿拉尔","101130701");
    m.put("阿克苏","101130801");
    m.put("喀什","101130901");
    m.put("伊宁","101131001");
    m.put("塔城","101131101");
    m.put("哈密","101131201");
    m.put("和田","101131301");
    m.put("阿勒泰","101131401");
    m.put("阿图什","101131501");
    m.put("博乐","1011301601");
    m.put("昆明","101290101");
    m.put("大理","101290201");
    m.put("红河","101290301");
    m.put("曲靖","101290401");
    m.put("保山","101290501");
    m.put("文山","101290601");
    m.put("玉溪","101290701");
    m.put("楚雄","101290801");
    m.put("普洱","101290901");
    m.put("昭通","101291001");
    m.put("临沧","101291101");
    m.put("怒江","101291201");
    m.put("中甸","101291301");
    m.put("丽江","101291401");
    m.put("德宏","101291501");
    m.put("景洪","101291601");
    m.put("杭州","101210101");
    m.put("湖州","101210201");
    m.put("嘉兴","101210301");
    m.put("宁波","101210401");
    m.put("绍兴","101210501");
    m.put("台州","101210601");
    m.put("温州","101210701");
    m.put("丽水","101210801");
    m.put("金华","101210901");
    m.put("衢州","101211001");
    m.put("舟山","101211101");
  }
  public String data(HttpServletRequest request, HttpServletResponse response) throws Exception {
    Connection dbConn = null;
    try {
      T9RequestDbConn requestDbConn = (T9RequestDbConn) request.getAttribute(T9BeanKeys.REQUEST_DB_CONN_MGR);
      dbConn = requestDbConn.getSysDbConn();
      
      String cityName = request.getParameter("CITY_NAME");
     
      String id = m.get(cityName);
      if (T9Utility.isNullorEmpty(id)) {
        T9MobileUtility.output(response,"无该城市的天气数据");
        return null;
      }
      /*
      String weatherPath = "http://m.weather.com.cn/data/" + id + ".html";
      HttpClient client = new HttpClient();
      GetMethod getMethod = new GetMethod(weatherPath);
      //设置成了默认的恢复策略，在发生异常时候将自动重试3次，在这里你也可以设置成自定义的恢复策略
      getMethod.getParams().setParameter(HttpMethodParams.RETRY_HANDLER, 
              new DefaultHttpMethodRetryHandler()); 
      //执行getMethod
      int statusCode = client.executeMethod(getMethod);
      if (statusCode != HttpStatus.SC_OK) {
        System.err.println("Method failed: " + getMethod.getStatusLine());
      }
      byte[] responseBody = getMethod.getResponseBody();
      getMethod.releaseConnection();
      System.err.println(new String(responseBody, "utf-8"));
      */
      T9MobileUtility.output(response,"");
      return null;
    } catch (Exception ex) {
      throw ex;
    }
  }
  
}
